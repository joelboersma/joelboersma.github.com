<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Exp. 2: Fibonacci+</title>
   <style>
      body {
         font-family: Arial, Helvetica, sans-serif;
      }
      mark {
         background-color: transparent;
         color: blue;
      }
      h2 {
         color: red;
      }
      li::marker {
         color: gray;
      }
   </style>
</head>
<body>
   <h1>The First <mark>N</mark> Fibonacci Numbers</h1>
   <h2></h2>
   <ol></ol>

   <script>

      /* 
         This program prompts the user to enter a positive integer n and will
         display the first n fibonacci numbers on the page in an ordered list.
         The program will also check if the input is valid and, if it isn't, 
         will display the error in an <h2>.
      */

      // @n: any
      // Returns true if @n is a positive integer.
      // Otherwise, shows error in h2 and returns false.
      function isPositiveInt(n) {
         var errorString = "";

         if (n == null || n == "") {
            errorString = "You didn't enter anything!";
         }
         else if (n % 1 != 0) {
            errorString = "You did not enter an integer!";
         }
         else if (n < 0) {
            errorString = "You entered a negative integer!";
         }
         else if (n == 0) {
            errorString = "You entered 0!";
         }
         else {
            return true;
         }

         // Display error
         var errorHeading = document.querySelector("h2");
         errorHeading.innerText = "Error: " + errorString;

         return false;
      }

      // @n: positive integer
      // Returns an array of the first n fibonacci numbers.
      function calcFibNums(n) {
         var fibNums = [];
         var num1 = 0;  // f0 = 0
         var num2 = 1;  // f1 = 1
         for (var i = 0; i < n; i++) {
            if (i < 2) {
               fibNums.push(i);
            }
            else {
               var newNum = num1 + num2;
               fibNums.push(newNum);
               num1 = num2;
               num2 = newNum;
            }
         }
         return fibNums;
      }

      // @fibNums: number[]
      // Shows each element of fibNums on the page
      function showFibNums(fibNums) {
         var ol = document.querySelector('ol');
         for (var num of fibNums) {
            // Append <li> containing @num to <ol>
            var li = document.createElement('li');
            li.innerText = num;
            ol.appendChild(li);
         }
      }

      // Main Sequence
      var n = prompt("How many fibonacci numbers would you like? \nPlease enter a positive integer:");
      if (isPositiveInt(n)) {
         var fibNums = calcFibNums(n);
         document.querySelector('mark').innerText = n;
         showFibNums(fibNums);
      }

   </script>

</body>
</html>